(this["webpackJsonpreact-entity-form-example"]=this["webpackJsonpreact-entity-form-example"]||[]).push([[0],{114:function(e,t,n){},115:function(e,t,n){"use strict";n.r(t);n(39);var r=n(0),i=n.n(r),o=n(34),a=n.n(o),s=n(7),l=n(37),u=n(1),c=n(2),d=n(4),f=n(5),m=n(35),h=n(36),b=n.n(h),v=n(18),p=n.n(v),y=n(25),O=n.n(y),j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(d.a)(this,e),this.layoutsArr=[],this.layoutIdToArrIndex=new Map,this.layoutsArr=t,this.layoutIdToArrIndex=new Map(t.map((function(e,t){return[e.id,t]})))}return Object(f.a)(e,[{key:"addLayout",value:function(e){return this.layoutsArr=this.layoutsArr.concat([e]),this.layoutIdToArrIndex.set(e.id,this.layoutsArr.length-1),this}},{key:"removeLayout",value:function(e){var t=this.layoutIdToArrIndex.get(e);return null==t||(this.layoutsArr=[].concat(Object(c.a)(this.layoutsArr.slice(0,t)),Object(c.a)(this.layoutsArr.slice(t+1))),this.layoutIdToArrIndex.delete(e)),this}},{key:"updateLayout",value:function(e){var t=this.layoutIdToArrIndex.get(e.id);return null==t||(this.layoutsArr=[].concat(Object(c.a)(this.layoutsArr.slice(0,t)),[e],Object(c.a)(this.layoutsArr.slice(t+1)))),this}},{key:"build",value:function(){return this.layoutsArr}}]),e}();var w=function(){var e=1;return function(){return"".concat(e++)}}(),k=function(){function e(t){Object(d.a)(this,e),this.rows=[],this.id=w(),this.isHidden=!1,this.additional=void 0,t&&(this.rows=t.rows,this.id=t.id,this.isHidden=t.isHidden,this.additional=t.additional)}return Object(f.a)(e,[{key:"markHidden",value:function(){return this.isHidden=!0,this}},{key:"markVisible",value:function(){return this.isHidden=!1,this}},{key:"setAdditional",value:function(e){return this.additional=e,this}},{key:"addRow",value:function(e){return this.rows=this.rows.concat([e]),this}},{key:"build",value:function(){return{rows:this.rows,id:this.id,isHidden:this.isHidden,additional:this.additional}}}]),e}();var A=function(){var e=1;return function(){return"".concat(e++)}}(),C=function(){function e(t){return Object(d.a)(this,e),this.columns=[],this.id=A(),this.isHidden=!1,this.additional=void 0,t&&(this.columns=t.columns,this.id=t.id,this.isHidden=t.isHidden,this.additional=t.additional),this}return Object(f.a)(e,[{key:"markHidden",value:function(){return this.isHidden=!0,this}},{key:"markVisible",value:function(){return this.isHidden=!1,this}},{key:"setAdditional",value:function(e){return this.additional=e,this}},{key:"addColumn",value:function(e){return this.columns=this.columns.concat([e]),this}},{key:"build",value:function(){return{id:this.id,columns:this.columns,isHidden:this.isHidden,additional:this.additional}}}]),e}();var I=function(){var e=1;return function(){return"".concat(e++)}}(),E=function(){function e(t){return Object(d.a)(this,e),this.rows=[],this.id=I(),this.isHidden=!1,this.additional=void 0,t&&(this.rows=t.rows,this.id=t.id,this.isHidden=t.isHidden,this.additional=t.additional),this}return Object(f.a)(e,[{key:"markHidden",value:function(){return this.isHidden=!0,this}},{key:"markVisible",value:function(){return this.isHidden=!1,this}},{key:"setAdditional",value:function(e){return this.additional=e,this}},{key:"addRow",value:function(e){return this.rows=this.rows.concat([e]),this}},{key:"build",value:function(){return{id:this.id,rows:this.rows,isHidden:this.isHidden,additional:this.additional}}}]),e}();function H(){return null}var g=function(){function e(t){Object(d.a)(this,e),this.FieldComponent=H,this.componentProps={},this.isHidden=!1,t&&(this.FieldComponent=t.FieldComponent,this.componentProps=t.componentProps,this.isHidden=t.isHidden,this.fieldId=t.fieldId)}return Object(f.a)(e,[{key:"setFieldComponent",value:function(e){this.FieldComponent=e}},{key:"setComponentProps",value:function(e){this.componentProps=e}},{key:"build",value:function(){return{FieldComponent:this.FieldComponent,componentProps:this.componentProps,isHidden:this.isHidden,fieldId:this.fieldId}}}]),e}();function R(e){return"string"===typeof e?e:e.id}function N(e,t){var n=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rows";return"string"===typeof t?[t]:t[n].flatMap((function(t){return"string"===typeof t?t:e(t,"rows"===n?"columns":"rows")}))}(e,t);return Object(m.a)(n.map((function(e){return b()(e)})),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t,r){return e[n[r]]=t,e}),{})}))}function _(e,t){return e.reduce((function(e,n){var r=R(n);return e.selectors[r]={valuesGetter:N(n,t),fieldsGetter:N(n,t),errorsGetter:N(n,t)},e.units[r]=n,e}),{selectors:{},units:{}})}var x=function(e){var t={},n={};return function(r){if(null==n){var i=_(r,e),o=i.selectors,a=i.units;return n=a,t=o}var s=r.filter((function(e){return n[R(e)]&&n[R(e)]!==e})),l=r.filter((function(e){return n[R(e)]&&n[R(e)]===e})),d=r.filter((function(e){return!n[R(e)]})),f=_([].concat(Object(c.a)(s),Object(c.a)(d)),e),m=f.selectors,h=f.units,b=l.map((function(e){return R(e)}));return t=Object(u.a)(Object(u.a)({},p()(t,b)),m),n=Object(u.a)(Object(u.a)({},p()(n,b)),h),t}},F="_styles-module__flex__3z8Cu",T="_styles-module__flexRow__1Qthv",P="_styles-module__flexCol__1vnyS",S="_styles-module__flex1__1R0K5",G=function(e){var t=e.className,n=e.children;return i.a.createElement("div",{className:t},n)},M=function e(t){var n=t.values,o=t.errors,a=t.fields,s=t.row,l=t.onAction,u=t.className,c=void 0===u?"":u,d=t.unitKey,f=void 0===d?"columns":d,m=t.componentOverrides,h=Object(r.useRef)(x("columns"===f?"rows":"columns")),b=s[f],v=Object(r.useMemo)((function(){return null==b?{}:h.current(b)}),[b]);if("string"===typeof s){if(a[s].isHidden)return null;var p=a[s],y=n[s],O=o[s],j=p.FieldComponent,w=p.componentProps,k=p.fieldId;return i.a.createElement(j,Object.assign({},w,{onAction:l,className:c,value:y,error:O,fieldId:k}))}var A=(null===m||void 0===m?void 0:m.Row)||G;return i.a.createElement(A,{className:"".concat(F," ").concat("columns"===f?T:P," ").concat(c||""),unitKey:f,values:n,errors:o,fields:a,onAction:l,row:s},b.map((function(t){var r="string"===typeof t?t:t.id;return i.a.createElement(e,{key:r,row:t,values:v[r].valuesGetter(n),errors:v[r].errorsGetter(o),fields:v[r].fieldsGetter(a),unitKey:"rows"===f?"columns":"rows",onAction:l,className:S,componentOverrides:m})})))},L=function(e){var t=e.children;return i.a.createElement(i.a.Fragment,null,t)},V=function(e){var t=e.values,n=e.errors,o=e.fields,a=e.layout,s=e.onAction,l=e.componentOverrides,u=Object(r.useRef)(x("columns")),c=Object(r.useMemo)((function(){return u.current(a.rows)}),[a.rows]),d=(null===l||void 0===l?void 0:l.Layout)||L;return i.a.createElement(d,{values:t,errors:n,fields:o,layout:a,onAction:s},a.rows.map((function(e){var r="string"===typeof e?e:e.id;return i.a.createElement(M,{key:r,row:e,fields:c[r].fieldsGetter(o),values:c[r].valuesGetter(t),errors:c[r].errorsGetter(n),onAction:s,componentOverrides:l})})))},B=function(e){var t=e.onSubmit,n=e.children;return i.a.createElement("form",{onSubmit:t},n)},D=function(e){var t=e.values,n=e.errors,o=e.fields,a=e.layouts,s=e.onAction,l=e.componentOverrides,u=Object(r.useCallback)((function(e){e.preventDefault()}),[]),c=Object(r.useRef)(x("rows")),d=Object(r.useMemo)((function(){return c.current(a)}),[a]),f=(null===l||void 0===l?void 0:l.Root)||B;return i.a.createElement(f,{onSubmit:u},a.map((function(e){return i.a.createElement(V,{key:e.id,layout:e,fields:d[e.id].fieldsGetter(o),values:d[e.id].valuesGetter(t),errors:d[e.id].errorsGetter(n),onAction:s,componentOverrides:l})})))};function U(e,t){return Object(u.a)(Object(u.a)({},e),{},{values:Object(u.a)(Object(u.a)({},e.values),{},{[t.payload.fieldId]:t.payload.value})})}function K(e,t){switch(t.type){case"@@form/change":return U(e,t);case"RESET":return Object(u.a)(Object(u.a)({},e),t.payload);case"SET_LOADING":return Object(u.a)(Object(u.a)({},e),{},{loading:t.payload});case"SUBMIT":return Object(u.a)(Object(u.a)({},e),{},{loading:!1,errors:t.payload.errors,submitCount:e.submitCount+1});case"UPDATE_ERRORS":return Object(u.a)(Object(u.a)({},e),{},{errors:t.payload});case"@@form/touch-field":return Object(u.a)(Object(u.a)({},e),{},{touched:Object(u.a)(Object(u.a)({},e.touched),{},{[t.payload.fieldId]:!0})});default:return e}}var J={},z=function(e,t){var n=Object(r.useRef)(e),i=Object(r.useRef)(t);n.current=e,i.current=t;var o=Object(r.useCallback)((function(e){i.current({type:"@@form/change",payload:{fieldId:n.current,value:e}})}),[]),a=Object(r.useCallback)((function(){i.current({type:"@@form/touch-field",payload:{fieldId:n.current}})}),[]);return[Object(r.useCallback)((function(e){i.current({type:"@@form/register-field",payload:{fieldId:n.current,el:e}})}),[]),a,o]},Q=function(e){var t=e.value,n=void 0===t?"":t,o=e.onAction,a=e.className,l=e.fieldId,u=e.label,c=z(l,o),d=Object(s.a)(c,3),f=d[0],m=d[1],h=d[2],b=Object(r.useCallback)((function(e){h(e.target.value)}),[h]);return i.a.createElement("div",{className:"".concat(a||""," flex flex-col"),ref:f},i.a.createElement("label",{className:"block flex-none",htmlFor:l},u),i.a.createElement("input",{onBlur:m,id:l,placeholder:u,className:"w-full block flex-1",type:"text",value:n,onChange:b}))};var q={firstname:new g({fieldId:"firstname",isHidden:!1,componentProps:{className:"",label:"First name"},FieldComponent:Q}).build(),lastname:new g({fieldId:"lastname",isHidden:!1,componentProps:{className:"",label:"Last Name"},FieldComponent:Q}).build(),tagline:new g({fieldId:"tagline",isHidden:!1,componentProps:{className:"",label:"Tagline"},FieldComponent:Q}).build(),lifeMoto:new g({fieldId:"lifeMoto",isHidden:!1,componentProps:{className:"",label:"Life Moto"},FieldComponent:function(e){var t=e.value,n=void 0===t?"":t,o=e.onAction,a=e.className,l=e.fieldId,u=e.label,c=z(l,o),d=Object(s.a)(c,3),f=d[0],m=d[1],h=d[2],b=Object(r.useCallback)((function(e){h(e.target.value)}),[h]);return i.a.createElement("div",{ref:f,className:"".concat(a||""," flex flex-col")},i.a.createElement("label",{className:"block flex-none",htmlFor:l},u),i.a.createElement("textarea",{onBlur:m,id:l,placeholder:u,className:"w-full block flex-1",value:n,onChange:b,rows:3}))}}).build(),address1:new g({fieldId:"address1",isHidden:!1,componentProps:{className:"",label:"Address line 1"},FieldComponent:Q}).build(),address2:new g({fieldId:"address2",isHidden:!1,componentProps:{className:"",label:"Address line 2"},FieldComponent:Q}).build(),pincode:new g({fieldId:"pincode",isHidden:!1,componentProps:{className:"",label:"Pincode"},FieldComponent:Q}).build()},W=(new j).addLayout((new k).addRow((new C).addColumn("firstname").addColumn("lastname").build()).addRow("tagline").addRow((new C).addColumn("lifeMoto").addColumn((new E).addRow("address1").addRow("address2").addRow("pincode").build()).build()).build()).build(),X=function(){var e=function(e){var t=e.initialValues,n=e.initialErrors,i=e.initialLayouts,o=e.initialFields,a=e.onSubmit,c=e.onAction,d=e.validate,f=e.reduceChanges,m=e.shouldScrollToErrors,h=e.shoudlValidateOnBlur,b=Object(r.useReducer)(K,{values:t,errors:n,layouts:i,fields:o,touched:{},submitCount:0}),v=Object(s.a)(b,2),y=v[0],j=v[1],w=y.submitCount,k=Object(l.a)(y,["submitCount"]),A=Object(r.useRef)({}),C=Object(r.useRef)(h),I=Object(r.useRef)(a),E=Object(r.useRef)(c),H=Object(r.useRef)(f),g=Object(r.useRef)(d),R=Object(r.useRef)(y);C.current=h,I.current=a,E.current=c,H.current=f,R.current=y,g.current=d;var N=Object(r.useRef)(null),_=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R.current.errors,t=O()(e)[0],n=A.current[t];n&&n.scrollIntoView&&n.scrollIntoView()}),[]),x=Object(r.useCallback)((function(e){N.current&&(N.current.ignore=!0);var t=Promise.resolve(g.current(R.current));N.current=t,j({type:"SET_LOADING",payload:!0}),t.then((function(n){t.ignore||e(n)})).catch((function(){t.ignore||j({type:"SET_LOADING",payload:!1})}))}),[]),F=Object(r.useCallback)((function(){g.current&&x((function(e){e?(j({type:"SUBMIT",payload:{errors:e}}),m&&_(e)):(j({type:"SUBMIT",payload:{errors:{}}}),a(k))}))}),[]),T=Object(r.useCallback)((function(e){switch(e.type){case"@@form/change":j(f?{type:"RESET",payload:H.current(R.current,U(R.current,e),e)}:e);break;case"@@form/touch-field":j(e);break;case"@@form/register-field":A.current[e.payload.fieldId]=e.payload.el;break;default:return E.current(e)}}),[]),P=Object(r.useCallback)((function(e){j({type:"RESET",payload:e})}),[]);return Object(r.useEffect)((function(){if(g.current){var e=O()(R.current.touched);(w||e.length&&C.current)&&x((function(t){j({type:"UPDATE_ERRORS",payload:w?t||J:p()(t,e)})}))}}),[k.values,k.touched,w]),Object(u.a)(Object(u.a)({},k),{},{handleSubmit:F,handleAction:T,scrollToError:_,reset:P})}({initialErrors:{},initialValues:{}}),t=e.handleAction,n=e.errors,o=e.values;e.touched;return i.a.createElement(D,{fields:q,layouts:W,values:o,errors:n,onAction:t})},Y=(n(114),function(){return i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,"Hello React Entity Form"),i.a.createElement(X,null))});a.a.render(i.a.createElement(Y,null),document.getElementById("root"))},38:function(e,t,n){e.exports=n(115)},39:function(e,t,n){}},[[38,1,2]]]);
//# sourceMappingURL=main.4eb4fbd6.chunk.js.map