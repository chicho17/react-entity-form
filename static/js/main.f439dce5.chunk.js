(this["webpackJsonpreact-entity-form-example"]=this["webpackJsonpreact-entity-form-example"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);n(34);var i=n(0),o=n.n(i),r=n(29),s=n.n(r),a=n(13),l=n(1),d=n(32),u=n(2),c=n(3),f=n(4),m=n(30),h=n(31),v=n.n(h),p=n(21),b=n.n(p),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(c.a)(this,e),this.layoutsArr=[],this.layoutIdToArrIndex=new Map,this.layoutsArr=t,this.layoutIdToArrIndex=new Map(t.map((function(e,t){return[e.id,t]})))}return Object(f.a)(e,[{key:"addLayout",value:function(e){return this.layoutsArr=this.layoutsArr.concat([e]),this.layoutIdToArrIndex.set(e.id,this.layoutsArr.length-1),this}},{key:"removeLayout",value:function(e){var t=this.layoutIdToArrIndex.get(e);return null==t||(this.layoutsArr=[].concat(Object(u.a)(this.layoutsArr.slice(0,t)),Object(u.a)(this.layoutsArr.slice(t+1))),this.layoutIdToArrIndex.delete(e)),this}},{key:"updateLayout",value:function(e){var t=this.layoutIdToArrIndex.get(e.id);return null==t||(this.layoutsArr=[].concat(Object(u.a)(this.layoutsArr.slice(0,t)),[e],Object(u.a)(this.layoutsArr.slice(t+1)))),this}},{key:"build",value:function(){return this.layoutsArr}}]),e}();var w=function(){var e=1;return function(){return"".concat(e++)}}(),k=function(){function e(t){Object(c.a)(this,e),this.rows=[],this.id=w(),this.isHidden=!1,this.additional=void 0,t&&(this.rows=t.rows,this.id=t.id,this.isHidden=t.isHidden,this.additional=t.additional)}return Object(f.a)(e,[{key:"markHidden",value:function(){return this.isHidden=!0,this}},{key:"markVisible",value:function(){return this.isHidden=!1,this}},{key:"setAdditional",value:function(e){return this.additional=e,this}},{key:"addRow",value:function(e){return this.rows=this.rows.concat([e]),this}},{key:"build",value:function(){return{rows:this.rows,id:this.id,isHidden:this.isHidden,additional:this.additional}}}]),e}();var H=function(){var e=1;return function(){return"".concat(e++)}}(),j=function(){function e(t){return Object(c.a)(this,e),this.columns=[],this.id=H(),this.isHidden=!1,this.additional=void 0,t&&(this.columns=t.columns,this.id=t.id,this.isHidden=t.isHidden,this.additional=t.additional),this}return Object(f.a)(e,[{key:"markHidden",value:function(){return this.isHidden=!0,this}},{key:"markVisible",value:function(){return this.isHidden=!1,this}},{key:"setAdditional",value:function(e){return this.additional=e,this}},{key:"addColumn",value:function(e){return this.columns=this.columns.concat([e]),this}},{key:"build",value:function(){return{id:this.id,columns:this.columns,isHidden:this.isHidden,additional:this.additional}}}]),e}();var A=function(){var e=1;return function(){return"".concat(e++)}}(),O=function(){function e(t){return Object(c.a)(this,e),this.rows=[],this.id=A(),this.isHidden=!1,this.additional=void 0,t&&(this.rows=t.rows,this.id=t.id,this.isHidden=t.isHidden,this.additional=t.additional),this}return Object(f.a)(e,[{key:"markHidden",value:function(){return this.isHidden=!0,this}},{key:"markVisible",value:function(){return this.isHidden=!1,this}},{key:"setAdditional",value:function(e){return this.additional=e,this}},{key:"addRow",value:function(e){return this.rows=this.rows.concat([e]),this}},{key:"build",value:function(){return{id:this.id,rows:this.rows,isHidden:this.isHidden,additional:this.additional}}}]),e}();function I(){return null}var C=function(){function e(t){Object(c.a)(this,e),this.FieldComponent=I,this.componentProps={},this.isHidden=!1,t&&(this.FieldComponent=t.FieldComponent,this.componentProps=t.componentProps,this.isHidden=t.isHidden,this.fieldId=t.fieldId)}return Object(f.a)(e,[{key:"setFieldComponent",value:function(e){this.FieldComponent=e}},{key:"setComponentProps",value:function(e){this.componentProps=e}},{key:"build",value:function(){return{FieldComponent:this.FieldComponent,componentProps:this.componentProps,isHidden:this.isHidden,fieldId:this.fieldId}}}]),e}();function g(e){return"string"===typeof e?e:e.id}function x(e,t){var n=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rows";return"string"===typeof t?[t]:t[n].flatMap((function(t){return"string"===typeof t?t:e(t,"rows"===n?"columns":"rows")}))}(e,t);return Object(m.a)(n.map((function(e){return v()(e)})),(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce((function(e,t,i){return e[n[i]]=t,e}),{})}))}function N(e,t){return e.reduce((function(e,n){var i=g(n);return e.selectors[i]={valuesGetter:x(n,t),fieldsGetter:x(n,t),errorsGetter:x(n,t)},e.units[i]=n,e}),{selectors:{},units:{}})}var E=function(e){var t={},n={};return function(i){if(null==n){var o=N(i,e),r=o.selectors,s=o.units;return n=s,t=r}var a=i.filter((function(e){return n[g(e)]&&n[g(e)]!==e})),d=i.filter((function(e){return n[g(e)]&&n[g(e)]===e})),c=i.filter((function(e){return!n[g(e)]})),f=N([].concat(Object(u.a)(a),Object(u.a)(c)),e),m=f.selectors,h=f.units,v=d.map((function(e){return g(e)}));return t=Object(l.a)(Object(l.a)({},b()(t,v)),m),n=Object(l.a)(Object(l.a)({},b()(n,v)),h),t}},F="_styles-module__flex__3z8Cu",_="_styles-module__flexRow__1Qthv",P="_styles-module__flexCol__1vnyS",R="_styles-module__flex1__1R0K5",G=function e(t){var n=t.values,r=t.errors,s=t.fields,a=t.row,l=t.onAction,d=t.className,u=void 0===d?"":d,c=t.unitKey,f=void 0===c?"columns":c,m=Object(i.useRef)(E("columns"===f?"rows":"columns")),h=a[f],v=Object(i.useMemo)((function(){return null==h?{}:m.current(h)}),[h]);if("string"===typeof a){if(s[a].isHidden)return null;var p=s[a],b=n[a],y=r[a],w=p.FieldComponent,k=p.componentProps,H=p.fieldId;return o.a.createElement(w,Object.assign({},k,{onAction:l,className:u,value:b,error:y,fieldId:H}))}return o.a.createElement("div",{className:"".concat(F," ").concat("columns"===f?_:P," ").concat(u||"")},h.map((function(t){var i="string"===typeof t?t:t.id;return o.a.createElement(e,{key:i,row:t,values:v[i].valuesGetter(n),errors:v[i].errorsGetter(r),fields:v[i].fieldsGetter(s),unitKey:"rows"===f?"columns":"rows",onAction:l,className:R})})))},M=function(e){var t=e.values,n=e.errors,r=e.fields,s=e.layout,a=e.onAction,l=Object(i.useRef)(E("columns")),d=Object(i.useMemo)((function(){return l.current(s.rows)}),[s.rows]);return o.a.createElement(o.a.Fragment,null,s.rows.map((function(e){var i="string"===typeof e?e:e.id;return o.a.createElement(G,{key:i,row:e,fields:d[i].fieldsGetter(r),values:d[i].valuesGetter(t),errors:d[i].errorsGetter(n),onAction:a})})))},T=function(e){var t=e.values,n=e.errors,r=e.fields,s=e.layouts,a=e.onAction,l=Object(i.useCallback)((function(e){e.preventDefault()}),[]),d=Object(i.useRef)(E("rows")),u=Object(i.useMemo)((function(){return d.current(s)}),[s]);return o.a.createElement("form",{onSubmit:l},s.map((function(e){return o.a.createElement(M,{key:e.id,layout:e,fields:u[e.id].fieldsGetter(r),values:u[e.id].valuesGetter(t),errors:u[e.id].errorsGetter(n),onAction:a})})))},L=function(e){var t=e.value,n=void 0===t?"":t,r=e.onAction,s=e.className,a=e.fieldId,l=e.label,d=Object(i.useCallback)((function(e){r({type:"@@form/change",payload:{fieldId:a,value:e.target.value}})}),[r,a]);return o.a.createElement("div",{className:"".concat(s||""," flex flex-col")},o.a.createElement("label",{className:"block flex-none",htmlFor:a},l),o.a.createElement("input",{id:a,placeholder:l,className:"w-full block flex-1",type:"text",value:n,onChange:d}))};var K={firstname:new C({fieldId:"firstname",isHidden:!1,componentProps:{className:"",label:"First name"},FieldComponent:L}).build(),lastname:new C({fieldId:"lastname",isHidden:!1,componentProps:{className:"",label:"Last Name"},FieldComponent:L}).build(),tagline:new C({fieldId:"tagline",isHidden:!1,componentProps:{className:"",label:"Tagline"},FieldComponent:L}).build(),lifeMoto:new C({fieldId:"lifeMoto",isHidden:!1,componentProps:{className:"",label:"Life Moto"},FieldComponent:function(e){var t=e.value,n=void 0===t?"":t,r=e.onAction,s=e.className,a=e.fieldId,l=e.label,d=Object(i.useCallback)((function(e){r({type:"@@form/change",payload:{fieldId:a,value:e.target.value}})}),[r,a]);return o.a.createElement("div",{className:"".concat(s||""," flex flex-col")},o.a.createElement("label",{className:"block flex-none",htmlFor:a},l),o.a.createElement("textarea",{id:a,placeholder:l,className:"w-full block flex-1",value:n,onChange:d,rows:3}))}}).build(),address1:new C({fieldId:"address1",isHidden:!1,componentProps:{className:"",label:"Address line 1"},FieldComponent:L}).build(),address2:new C({fieldId:"address2",isHidden:!1,componentProps:{className:"",label:"Address line 2"},FieldComponent:L}).build(),pincode:new C({fieldId:"pincode",isHidden:!1,componentProps:{className:"",label:"Pincode"},FieldComponent:L}).build()},S=(new y).addLayout((new k).addRow((new j).addColumn("firstname").addColumn("lastname").build()).addRow("tagline").addRow((new j).addColumn("lifeMoto").addColumn((new O).addRow("address1").addRow("address2").addRow("pincode").build()).build()).build()).build(),V=function(){var e=o.a.useState({}),t=Object(d.a)(e,2),n=t[0],i=t[1],r=o.a.useCallback((function(e){i((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(a.a)({},e.payload.fieldId,e.payload.value))}))}),[i]);return o.a.createElement(T,{fields:K,layouts:S,values:n,errors:{},onAction:r})},J=(n(99),function(){return o.a.createElement("div",{className:"App"},o.a.createElement("h1",null,"Hello React Entity Form"),o.a.createElement(V,null))});s.a.render(o.a.createElement(J,null),document.getElementById("root"))},33:function(e,t,n){e.exports=n(100)},34:function(e,t,n){},99:function(e,t,n){}},[[33,1,2]]]);
//# sourceMappingURL=main.f439dce5.chunk.js.map