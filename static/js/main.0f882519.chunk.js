(this["webpackJsonpreact-entity-form-example"]=this["webpackJsonpreact-entity-form-example"]||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);n(32);var r=n(0),i=n.n(r),o=n(28),s=n.n(o),a=n(19),u=n(29),l=n(30),d=n.n(l),c=n(11),f=n.n(c),h=n(18),m=n.n(h),p=function(){function e(e){void 0===e&&(e=[]),this.layoutsArr=[],this.layoutIdToArrIndex=new Map,this.layoutsArr=e,this.layoutIdToArrIndex=new Map(e.map((function(e,t){return[e.id,t]})))}var t=e.prototype;return t.addLayout=function(e){return this.layoutsArr=this.layoutsArr.concat([e]),this.layoutIdToArrIndex.set(e.id,this.layoutsArr.length-1),this},t.removeLayout=function(e){var t=this.layoutIdToArrIndex.get(e);return null==t||(this.layoutsArr=[].concat(this.layoutsArr.slice(0,t),this.layoutsArr.slice(t+1)),this.layoutIdToArrIndex.delete(e)),this},t.updateLayout=function(e){var t=this.layoutIdToArrIndex.get(e.id);return null==t||(this.layoutsArr=[].concat(this.layoutsArr.slice(0,t),[e],this.layoutsArr.slice(t+1))),this},t.build=function(){return this.layoutsArr},e}();var b=function(){var e=1;return function(){return""+e++}}(),v=function(){function e(e){this.rows=[],this.id=b(),this.isHidden=!1,this.additional=void 0,e&&(this.rows=e.rows,this.id=e.id,this.isHidden=e.isHidden,this.additional=e.additional)}var t=e.prototype;return t.markHidden=function(){return this.isHidden=!0,this},t.markVisible=function(){return this.isHidden=!1,this},t.setAdditional=function(e){return this.additional=e,this},t.addRow=function(e){return this.rows=this.rows.concat([e]),this},t.build=function(){return{rows:this.rows,id:this.id,isHidden:this.isHidden,additional:this.additional}},e}();var y=function(){var e=1;return function(){return""+e++}}(),w=function(){function e(e){return this.columns=[],this.id=y(),this.isHidden=!1,this.additional=void 0,e&&(this.columns=e.columns,this.id=e.id,this.isHidden=e.isHidden,this.additional=e.additional),this}var t=e.prototype;return t.markHidden=function(){return this.isHidden=!0,this},t.markVisible=function(){return this.isHidden=!1,this},t.setAdditional=function(e){return this.additional=e,this},t.addColumn=function(e){return this.columns=this.columns.concat([e]),this},t.build=function(){return{id:this.id,columns:this.columns,isHidden:this.isHidden,additional:this.additional}},e}();var O=function(){var e=1;return function(){return""+e++}}(),A=function(){function e(e){return this.rows=[],this.id=O(),this.isHidden=!1,this.additional=void 0,e&&(this.rows=e.rows,this.id=e.id,this.isHidden=e.isHidden,this.additional=e.additional),this}var t=e.prototype;return t.markHidden=function(){return this.isHidden=!0,this},t.markVisible=function(){return this.isHidden=!1,this},t.setAdditional=function(e){return this.additional=e,this},t.addRow=function(e){return this.rows=this.rows.concat([e]),this},t.build=function(){return{id:this.id,rows:this.rows,isHidden:this.isHidden,additional:this.additional}},e}();function I(){return null}var C=function(){function e(e){this.FieldComponent=I,this.componentProps={},this.isHidden=!1,e&&(this.FieldComponent=e.FieldComponent,this.componentProps=e.componentProps,this.isHidden=e.isHidden,this.fieldId=e.fieldId)}var t=e.prototype;return t.setFieldComponent=function(e){this.FieldComponent=e},t.setComponentProps=function(e){this.componentProps=e},t.build=function(){return{FieldComponent:this.FieldComponent,componentProps:this.componentProps,isHidden:this.isHidden,fieldId:this.fieldId}},e}();function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function H(e){return"string"===typeof e?e:e.id}function g(e,t){var n=function e(t,n){return void 0===n&&(n="rows"),"string"===typeof t?[t]:t[n].flatMap((function(t){return"string"===typeof t?t:e(t,"rows"===n?"columns":"rows")}))}(e,t);return Object(u.a)(n.map((function(e){return d()(e)})),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t,r){return e[n[r]]=t,e}),{})}))}function j(e,t){return e.reduce((function(e,n){var r=H(n);return e.selectors[r]={valuesGetter:g(n,t),fieldsGetter:g(n,t),errorsGetter:g(n,t)},e.units[r]=n,e}),{selectors:{},units:{}})}var R=function(e){var t={},n={};return function(r){if(null==n){var i=j(r,e),o=i.selectors,s=i.units;return n=s,t=o}var a=r.filter((function(e){return n[H(e)]&&n[H(e)]!==e})),u=r.filter((function(e){return n[H(e)]&&n[H(e)]===e})),l=r.filter((function(e){return!n[H(e)]})),d=j([].concat(a,l),e),c=d.selectors,h=d.units,m=u.map((function(e){return H(e)}));return t=E({},f()(t,m),c),n=E({},f()(n,m),h),t}},k="_3z8Cu",N="_1Qthv",F="_1vnyS",x="_1R0K5",P=function e(t){var n=t.values,o=t.errors,s=t.fields,a=t.row,u=t.onAction,l=t.className,d=void 0===l?"":l,c=t.unitKey,f=void 0===c?"columns":c,h=Object(r.useRef)(R("columns"===f?"rows":"columns")),m=a[f],p=Object(r.useMemo)((function(){return null==m?{}:h.current(m)}),[m]);if("string"===typeof a){if(s[a].isHidden)return null;var b=s[a],v=n[a],y=o[a],w=b.FieldComponent,O=b.componentProps,A=b.fieldId;return i.a.createElement(w,Object.assign({},O,{onAction:u,className:d,value:v,error:y,fieldId:A}))}return i.a.createElement("div",{className:k+" "+("columns"===f?N:F)+" "+(d||"")},m.map((function(t){var r="string"===typeof t?t:t.id;return i.a.createElement(e,{key:r,row:t,values:p[r].valuesGetter(n),errors:p[r].errorsGetter(o),fields:p[r].fieldsGetter(s),unitKey:"rows"===f?"columns":"rows",onAction:u,className:x})})))},T=function(e){var t=e.values,n=e.errors,o=e.fields,s=e.layout,a=e.onAction,u=Object(r.useRef)(R("columns")),l=Object(r.useMemo)((function(){return u.current(s.rows)}),[s.rows]);return i.a.createElement(i.a.Fragment,null,s.rows.map((function(e){var r="string"===typeof e?e:e.id;return i.a.createElement(P,{key:r,row:e,fields:l[r].fieldsGetter(o),values:l[r].valuesGetter(t),errors:l[r].errorsGetter(n),onAction:a})})))},S=function(e){var t=e.values,n=e.errors,o=e.fields,s=e.layouts,a=e.onAction,u=Object(r.useCallback)((function(e){e.preventDefault()}),[]),l=Object(r.useRef)(R("rows")),d=Object(r.useMemo)((function(){return l.current(s)}),[s]);return i.a.createElement("form",{onSubmit:u},s.map((function(e){return i.a.createElement(T,{key:e.id,layout:e,fields:d[e.id].fieldsGetter(o),values:d[e.id].valuesGetter(t),errors:d[e.id].errorsGetter(n),onAction:a})})))};function G(e,t){var n;return E({},e,{values:E({},e.values,(n={},n[t.payload.fieldId]=t.payload.value,n))})}function M(e,t){switch(t.type){case"@@form/change":return G(e,t);case"RESET":return E({},e,t.payload);case"SET_LOADING":return E({},e,{loading:t.payload});case"SUBMIT":return E({},e,{loading:!1,errors:t.payload.errors,submitCount:e.submitCount+1});case"UPDATE_ERRORS":return E({},e,{errors:t.payload});case"@@form/touch-field":var n;return E({},e,{touched:E({},e.touched,(n={},n[t.payload.fieldId]=!0,n))});default:return e}}var L={},_=function(e){var t=e.initialValues,n=e.initialErrors,i=e.initialLayouts,o=e.initialFields,s=e.onSubmit,a=e.onAction,u=e.validate,l=e.reduceChanges,d=e.shouldScrollToErrors,c=e.shoudlValidateOnBlur,h=Object(r.useReducer)(M,{values:t,errors:n,layouts:i,fields:o,touched:{},submitCount:0}),p=h[0],b=h[1],v=p.submitCount,y=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(p,["submitCount"]),w=Object(r.useRef)({}),O=Object(r.useRef)(c),A=Object(r.useRef)(s),I=Object(r.useRef)(a),C=Object(r.useRef)(l),H=Object(r.useRef)(u),g=Object(r.useRef)(p);O.current=c,A.current=s,I.current=a,C.current=l,g.current=p,H.current=u;var j=Object(r.useRef)(null),R=Object(r.useCallback)((function(e){void 0===e&&(e=g.current.errors);var t=m()(e)[0],n=w.current[t];n&&n.scrollIntoView&&n.scrollIntoView()}),[]),k=Object(r.useCallback)((function(e){j.current&&(j.current.ignore=!0);var t=Promise.resolve(H.current(g.current));j.current=t,b({type:"SET_LOADING",payload:!0}),t.then((function(n){t.ignore||e(n)})).catch((function(){t.ignore||b({type:"SET_LOADING",payload:!1})}))}),[]),N=Object(r.useCallback)((function(){H.current&&k((function(e){e?(b({type:"SUBMIT",payload:{errors:e}}),d&&R(e)):(b({type:"SUBMIT",payload:{errors:{}}}),s(y))}))}),[]),F=Object(r.useCallback)((function(e){switch(e.type){case"@@form/change":b(l?{type:"RESET",payload:C.current(g.current,G(g.current,e),e)}:e);break;case"@@form/touch-field":b(e);break;case"@@form/register-field":w.current[e.payload.fieldId]=e.payload.el;break;default:return I.current(e)}}),[]),x=Object(r.useCallback)((function(e){b({type:"RESET",payload:e})}),[]);return Object(r.useEffect)((function(){if(H.current){var e=m()(g.current.touched);(v||e.length&&O.current)&&k((function(t){b({type:"UPDATE_ERRORS",payload:v?t||L:f()(t,e)})}))}}),[y.values,y.touched,v]),E({},y,{handleSubmit:N,handleAction:F,scrollToError:R,reset:x})},V=function(e,t){var n=Object(r.useRef)(e),i=Object(r.useRef)(t);n.current=e,i.current=t;var o=Object(r.useCallback)((function(e){i.current({type:"@@form/change",payload:{fieldId:n.current,value:e}})}),[]),s=Object(r.useCallback)((function(){i.current({type:"@@form/touch-field",payload:{fieldId:n.current}})}),[]);return[Object(r.useCallback)((function(e){i.current({type:"@@form/register-field",payload:{fieldId:n.current,el:e}})}),[]),s,o]},B=function(e){var t=e.value,n=void 0===t?"":t,o=e.onAction,s=e.className,u=e.fieldId,l=e.label,d=V(u,o),c=Object(a.a)(d,3),f=c[0],h=c[1],m=c[2],p=Object(r.useCallback)((function(e){m(e.target.value)}),[m]);return i.a.createElement("div",{className:"".concat(s||""," flex flex-col"),ref:f},i.a.createElement("label",{className:"block flex-none",htmlFor:u},l),i.a.createElement("input",{onBlur:h,id:u,placeholder:l,className:"w-full block flex-1",type:"text",value:n,onChange:p}))};var D={firstname:new C({fieldId:"firstname",isHidden:!1,componentProps:{className:"",label:"First name"},FieldComponent:B}).build(),lastname:new C({fieldId:"lastname",isHidden:!1,componentProps:{className:"",label:"Last Name"},FieldComponent:B}).build(),tagline:new C({fieldId:"tagline",isHidden:!1,componentProps:{className:"",label:"Tagline"},FieldComponent:B}).build(),lifeMoto:new C({fieldId:"lifeMoto",isHidden:!1,componentProps:{className:"",label:"Life Moto"},FieldComponent:function(e){var t=e.value,n=void 0===t?"":t,o=e.onAction,s=e.className,u=e.fieldId,l=e.label,d=V(u,o),c=Object(a.a)(d,3),f=c[0],h=c[1],m=c[2],p=Object(r.useCallback)((function(e){m(e.target.value)}),[m]);return i.a.createElement("div",{ref:f,className:"".concat(s||""," flex flex-col")},i.a.createElement("label",{className:"block flex-none",htmlFor:u},l),i.a.createElement("textarea",{onBlur:h,id:u,placeholder:l,className:"w-full block flex-1",value:n,onChange:p,rows:3}))}}).build(),address1:new C({fieldId:"address1",isHidden:!1,componentProps:{className:"",label:"Address line 1"},FieldComponent:B}).build(),address2:new C({fieldId:"address2",isHidden:!1,componentProps:{className:"",label:"Address line 2"},FieldComponent:B}).build(),pincode:new C({fieldId:"pincode",isHidden:!1,componentProps:{className:"",label:"Pincode"},FieldComponent:B}).build()},U=(new p).addLayout((new v).addRow((new w).addColumn("firstname").addColumn("lastname").build()).addRow("tagline").addRow((new w).addColumn("lifeMoto").addColumn((new A).addRow("address1").addRow("address2").addRow("pincode").build()).build()).build()).build(),K=function(){var e=_({initialErrors:{},initialValues:{}}),t=e.handleAction,n=e.errors,r=e.values;e.touched;return i.a.createElement(S,{fields:D,layouts:U,values:r,errors:n,onAction:t})},J=(n(107),function(){return i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,"Hello React Entity Form"),i.a.createElement(K,null))});s.a.render(i.a.createElement(J,null),document.getElementById("root"))},31:function(e,t,n){e.exports=n(108)},32:function(e,t,n){}},[[31,1,2]]]);
//# sourceMappingURL=main.0f882519.chunk.js.map